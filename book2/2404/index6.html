<!DOCTYPE html>
<html lang="sl">

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="shortcut icon" href="../favicon.ico" />

	<title>Razred IgraKart</title>

	<!-- Bootstrap Core CSS -->
	<link href="../css/bootstrap.min.css" rel="stylesheet">

	<!-- CodeMirror -->
	<link href="../css/codemirrorepl.css" rel="stylesheet">

	<!-- Custom CSS -->
	<link href="../css/simple-sidebar.css" rel="stylesheet">
	<link href="../css/font-awesome.min.css" rel="stylesheet">

	<link href="../css/style.css" rel="stylesheet">

	<!-- Black Jack -->
	<link href="blackjack/board.css" rel="stylesheet">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>

<body>

	<div id="wrapper">

		<!-- Sidebar -->
		<div id="sidebar-wrapper">
			<ul class="sidebar-nav">
				<li>
				  <a href="#" data-toggle="collapse" data-target="#menu1" role="button" aria-expanded="false">Uvod</a>
				  <div id="menu1" class="collapse">
					<ul class="sidebar-subnav">
					<li><a href="../2101/index.html">O učbeniku</a></li>
					</ul>
				  </div>
				</li>
				<li>
				  <a href="#" data-toggle="collapse" data-target="#menu2" role="button" aria-expanded="false">Predstavitev informacij</a>
				  <div id="menu2" class="collapse">
					<ul class="sidebar-subnav">
					<li><a href="../2201/index.html">Predstavitev informacij</a></li>
					<li><a href="../2202/index.html">Predstavitev števil</a></li>
					<li><a href="../2203/index.html">Pisna predstavitev</a></li>
					<li><a href="../2204/index.html">Slikovna predstavitev</a></li>
					<li><a href="../2205/index.html">Zvočna predstavitev</a></li>
					<li><a href="../2206/index.html">Predstavitev z gibljivo sliko</a></li>
					<li><a href="../2207/index.html">Računalniška grafika in računalniški vid*</a></li>
					<li><a href="../2208/index.html">Spletna predstavitev</a></li>
					</ul>
				  </div>
				</li>
				<li>
				  <a href="#" data-toggle="collapse" data-target="#menu3" role="button" aria-expanded="false">Tehnologije znanja</a>
				  <div id="menu3" class="collapse">
					<ul class="sidebar-subnav">
					<li><a href="../2301/index.html">Osnove preglednic</a></li>
					<li><a href="../2302/index.html">Osnove grafikonov</a></li>
					<li><a href="../2303/index.html">Modeliranje in simulacije</a></li>
					<li><a href="../2304/index.html">Podatkovne baze</a></li>
					<li><a href="../2305/index.html">Osnove SQL</a></li>
					<li><a href="../2306/index.html">Ekspertni sistemi</a></li>
					</ul>
				  </div>
				</li>
				<li>
				  <a href="#" data-toggle="collapse" data-target="#menu4" role="button" aria-expanded="false">Objektno usmerjeno programiranje</a>
				  <div id="menu4" class="collapse in">
					<ul class="sidebar-subnav">
					<li><a href="../2401/index.html">Razredi in objekti</a></li>
					<li><a href="../2402/index.html">Razredi in objekti II</a></li>
					<li><a href="../2403/index.html">Zbirke objektov</a></li>
					<li class="active"><a href="../2404/index.html">Dedovanje</a></li>
					<li><a href="../2405/index.html">Dogodki</a></li>
					</ul>
				  </div>
				</li>
			</ul>
		</div>
		<!-- /#sidebar-wrapper -->

		<!-- Fixed navbar -->
		<nav class="navbar navbar-default navbar-static-top">
		<div class="container-fluid">
			<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="../index.html">Računalništvo in informatika 2</a>
			</div>
			<div id="google_cse_wrapper">
                <script type="text/javascript" src="../js/google-cse.js"></script>
                <gcse:search linktarget="_self"></gcse:search>
                <link href="../css/google-cse.css" rel="stylesheet">
            </div>
            <div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="#menu-toggle" id="menu-toggle" title="Pokaži/Skrij kazalo"><span class="fa fa-file-text-o"></span></a></li>
					<li><a href="#license" title="Licenca" data-toggle="modal" data-target="#license"><span class="fa fa-creative-commons"></span></a></li>
					<li><a href="../2901/index.html" title="Kolofon"><span class="fa fa-book"></span></a></li>
					<li><a href="../2901/index1.html" title="Viri"><span class="fa fa-paperclip"></span></a></li>
					<li><a href="mailto:eUcbenik@lusy.fri.uni-lj.si" title="Komentar"><span class="fa fa-commenting-o"></span></a></li>
					<li><a href="http://github.com/anzeljg/rin2/archive/v1.00.zip" title="Prenos"><span class="fa fa-download"></span></a></li>
				</ul>
			</div><!--/.nav-collapse -->
		</div>
		</nav>

		<!-- Modal (popup) window: License -->
		<div id="license" class="modal fade" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Licenca</h4>
					</div>
					<div class="modal-body">
						<p>To delo je na voljo pod pogoji slovenske licence Creative Commons 2.5:</p>
						<p><strong>priznanje avtorstva - nekomercialno - deljenje pod enakimi pogoji.</strong></p>
						<p align="justify">Celotna licenca je na voljo na spletu na naslovu <a href="http://creativecommons.org/licenses/by-nc-sa/2.5/si/" target="_blank">http://creativecommons.org/licenses/by-nc-sa/2.5/si/</a>. V skladu s to licenco je dovoljeno vsakemu uporabniku delo razmnoževati, distribuirati, javno priobčevati, dajati v najem in tudi predelovati, vendar samo v nekomercialne namene in ob pogoju, da navede avtorja oziroma avtorje in izdajatelja tega dela. Če uporabnik delo predela, kar pomeni, da ga spremeni, preoblikuje, prevede ali uporabi to delo v svojem delu, lahko predelavo dela ponudi na voljo le pod pogoji, ki so enaki pogojem iz te licence oziroma pod enako licenco.</p>
						<p><img src="../img/by-nc-sa.eu.png" height="35" border="0"></p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Zapri</button>
					</div>
				</div>

			</div>
		</div>

		<!-- Page Content -->
		<div id="page-content-wrapper">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-6">
<!-- Left column start -->
<h1>Razred <code>IgraKart</code></h1>

<p align="justify">Razred <code>IgraKart</code> poskrbi za osnovna opravila, ki so skupna vsem igram s kartami, kot na primer ustvarjanje in mešanje kompleta kart:
<pre>
class IgraKart:

  def __init__(self):
    self._komplet = Komplet()
    self._komplet.premesaj()
</pre>
</p>

<p align="justify">Če želimo ustvariti točno določeno igro s kartami, potem uporabimo starševski razred <code>IgraKart</code>, podedujemo njegove metode in ga razširimo tako, da dodamo nove metode, ki so specifične za izbrano igro s kartami. Kot primer, bomo napisali kodo, s katero bomo simulirali igro <i>Black Jack</i>.</p>

<p align="justify">Cilj igre <i>Black Jack</i> je doseči seštevek kart 21 ali se mu čimbolj približati, vendar ga ne preseči. Polne igralne karte (fant, dama, kralj) predstavljajo vrednost 10, as predstavlja vrednost 1 ali 11 (kar igralcu v igri bolj odgovarja), druge karte imajo vrednost številk, ki jih predstavljajo. Delivec nato podeli vsakemu igralcu dve karti, sebi pa dve karti, od katerih je samo ena vidna. Igralci se nato odločajo, ali bodo še kupovali karte (uporabijo izraz <b>Hit</b>), ali se bodo zadovoljili s seštevkom prvih dveh kart (uporabijo izraz <b>Stand</b>).</p>

<p align="justify">Naslednji korak igre je, da delivec še sebi podeli naslednjo karto. Igra je zaključena, ko delivec doseže seštevek najmanj 17, ali ko preseže seštevek 21. Sledi obračun posamezne igre. Če igralec že med svojo igro preseže 21 točk, stavo takoj izgubi. Če seštevek 21 preseže delivec, mora izplačati stave vsem igralcem, ki so ostali v igri. Kadar tako igralec, kot delivec ostaneta v igri, se njuna seštevka kart primerjata in stavo dobi tisti, ki je bližji seštevku 21. Ob enakih seštevkih zmaga delivec. Glavni dobitek je kombinacija asa in polne karte. To je vrednost 21, imenuje pa se <i>Black Jack</i>.</p>
<!-- Left column end -->
					</div>
					<div class="col-md-6">
						<br />
<!-- Right column start -->
<div id="message">Pozdravljen(-a) v igri Black Jack!<br>Za začetek klikni Nova igra.</div>
<div id="board">
  <div id="dealer">Delivec:</div>
  <div id="dealer1"></div>
  <div id="dealer2"></div>
  <div id="dealer3"></div>
  <div id="dealer4"></div>
  <div id="dealer5"></div>
  <div id="player">Igralec:</div>
  <div id="player1"></div>
  <div id="player2"></div>
  <div id="player3"></div>
  <div id="player4"></div>
  <div id="player5"></div>
  <div id="balance">Imaš:</div>
  <div id="money"></div>
  <div id="betdiv"><span style="color:#ffffff">Stava:</span><br> 
    <input type="text" size="6" id="bet" style="margin-top:8px">
  </div>
</div>
<div id="buttonbar">
  <button id="hitButton" class="btn btn-success" onclick="hit()" disabled>Hit</button>
  <button id="standButton" class="btn btn-success" onclick="stand()" disabled>Stand</button>
  <button id="newGameButton" class="btn btn-success" onClick="startGame()">Nova igra</button>
</div>
<!-- Right column end -->
					</div>
				</div>
			</div>

			<!-- Page Pagination in Footer -->
			<div class="col-md-12">
				<center>
				<ul class="pagination pagination-sm">
					<li><a href="../2403/index.html" aria-label="Previous Unit"><span aria-hidden="true">&laquo;</span></a></li>
					<li><a href="../2404/index5.html" aria-label="Previous Page"><span aria-hidden="true">&#x2039;</span></a></li>
					<li><a href="../2404/index.html">297</a></li>
					<li><a href="../2404/index1.html">298</a></li>
					<li><a href="../2404/index2.html">299</a></li>
					<li><a href="../2404/index3.html">300</a></li>
					<li><a href="../2404/index4.html">301</a></li>
					<li><a href="../2404/index5.html">302</a></li>
					<li class="active"><a href="#">303</a></li>
					<li><a href="../2404/index7.html">304</a></li>
					<li><a href="../2404/index8.html">305</a></li>
					<li><a href="../2404/index9.html">306</a></li>
					<li><a href="../2404/index10.html">307</a></li>
					<li><a href="../2404/index11.html">308</a></li>
					<li><a href="../2404/index12.html">309</a></li>
					<li><a href="../2404/index13.html">310</a></li>
					<li><a href="../2404/index14.html">311</a></li>
					<li><a href="../2404/index15.html">312</a></li>
					<li><a href="../2404/index16.html">313</a></li>
					<li><a href="../2404/index7.html" aria-label="Next Page"><span aria-hidden="true">&#x203A;</span></a></li>
					<li><a href="../2405/index.html" aria-label="Next Unit"><span aria-hidden="true">&raquo;</span></a></li>
				</ul>
				</center>
			</div>

		</div>
		<!-- /#page-content-wrapper -->

	</div>
	<!-- /#wrapper -->

	<!-- jQuery -->
	<script src="../js/jquery.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="../js/bootstrap.min.js"></script>

	<!-- rPage: Highly responsive pagination for Bootstrap -->
	<script src="../js/responsive-paginate.js"></script>
	<script>
	$(document).ready(function () {
		$(".pagination").rPage();
	});
	</script>

	<!-- Menu Toggle Script -->
	<script>
	$("#menu-toggle").click(function(e) {
		e.preventDefault();
		$("#wrapper").toggleClass("toggled");
	});
	</script>

	<!-- eXe Project -->
	<script src="../js/exe/common.js"></script>

	<!-- Black Jack -->
    <script type="text/javascript" src="blackjack/card.js"></script>
    <script type="text/javascript" src="blackjack/displayedcard.js"></script>
    <script type="text/javascript" src="blackjack/prototype.js"></script>
    <script type="text/javascript" src="blackjack/scriptaculous.js?load=effects"></script>
    <script type="text/javascript" src="blackjack/effects.js"></script>

<script type="text/javascript">

var dealerCards = [];  // Arrays holding the DisplayCard objects used to show the cards
var playerCards = [];

dealerCards.count = 0;  // Number of cards actually in the dealer's hand
playerCards.count = 0;   // Number of cards actually in the player's hand

var deck = new Deck();

var gameInProgress = false;

var bet;
var betInput;
var money;
var moneyDisplay;
var message;

var standButton, hitButton, newGameButton;  // objects representing the buttons, so I can enable/disable them

function setup() {
    for (var i = 1; i <= 5; i++) {
       dealerCards[i] = new DisplayedCard("dealer" + i);
       dealerCards[i].cardContainer.style.display = "none";
       playerCards[i] = new DisplayedCard("player" + i);
       playerCards[i].cardContainer.style.display = "none";
    }
    message = document.getElementById("message");
    standButton = document.getElementById("standButton");
    hitButton = document.getElementById("hitButton");
    newGameButton = document.getElementById("newGameButton");
    moneyDisplay = document.getElementById("money");
    money = 100;
    moneyDisplay.innerHTML = "€" + money;
    betInput = document.getElementById("bet");
    betInput.value = 10;
    betInput.disabled = false;
    standButton.disabled = true;
    hitButton.disabled = true;
    newGameButton.disabled = false;
}

function dealCard(cards, runOnFinish, faceDown) {
    var crd = deck.nextCard();
    cards.count++;
    if (faceDown)
       cards[cards.count].setFaceDown();
    else
       cards[cards.count].setFaceUp();
    cards[cards.count].setCard(crd);
    new Effect.SlideDown(cards[cards.count].cardContainer, {
       duration: 0.5,
       queue: "end",
       afterFinish: runOnFinish
    });
}

function getTotal(hand) {
   var total = 0;
   var ace = false;
   for (var i = 1; i <= hand.count; i++) {
       total += Math.min(10, hand[i].card.value); 
       if (hand[i].card.value == 1)
          ace = true;
   }
   if (total + 10 <= 21 && ace)
      total += 10;
   return total;
}

function startGame() {
   if (!gameInProgress) {
      var betText = betInput.value;
      if ( ! betText.match(/^[0-9]+$/) || betText < 1 || betText > money) {
          message.innerHTML = "Stava mora biti število med 1 in " + money + 
               ".<br>Reši problem in ponovno pritisni Nova igra.";
          new Effect.Shake("betdiv");
          return;
      }
      betInput.disabled = true;
      bet = Number(betText);
      for (var i = 1; i <= 5; i++) {
          playerCards[i].cardContainer.style.display = "none";
          playerCards[i].setFaceDown();
          dealerCards[i].cardContainer.style.display = "none";
          dealerCards[i].setFaceDown();
      }
      message.innerHTML = "Delim karte...";
      deck.shuffle();
      dealerCards.count = 0;
      playerCards.count = 0;
      dealCard(playerCards);
      dealCard(dealerCards);
      dealCard(playerCards);
      dealCard(dealerCards, function() {
             standButton.disabled = false;
             hitButton.disabled = false;
             newGameButton.disabled = true;
             gameInProgress = true;
             var dealerTotal = getTotal(dealerCards);
             var playerTotal = getTotal(playerCards);
             if (dealerTotal == 21) {
                if (playerTotal == 21)
                    endGame(false, "Oba imata Black Jack, vendar ob izenačenjih zmaga delivec.");
                else
                    endGame(false, "Delivec ima Black Jack.");
             }
             else if (playerTotal == 21)
                endGame(true, "Imaš Black Jack.");
             else
                message.innerHTML = "Imaš " + playerTotal +".  Hit ali Stand?";
          }, true);
   }
}

function endGame(win, why) {
     if (win)
         money += bet;
     else
         money -= bet;
     message.innerHTML = (win ? "Čestitke! Zmagal(-a) si.  " : "Oprosti! Izgubil(-a) si.  ") + why + 
           (money > 0 ? "<br>Za novo igro klikni Nova igra." : "<br>Izgleda, da si ostal(-a) brez denarja!");
     standButton.disabled = true;
     hitButton.disabled = true;
     newGameButton.disabled = true;
     gameInProgress = false;
     if (dealerCards[2].faceDown) {
       dealerCards[2].cardContainer.style.display = "none";
       dealerCards[2].setFaceUp();
       new Effect.SlideDown(dealerCards[2].cardContainer, { duration: 0.5, queue: "end" });
     }
     new Effect.Fade(moneyDisplay, {
        duration: 0.5,
        queue: "end",
        afterFinish: function() {
            moneyDisplay.innerHTML = "€" + money;
            new Effect.Appear(moneyDisplay, {
               duration: 0.5,
               queue: "end",
               afterFinish: function() {
                   if (money <= 0) {
                        betInput.value = "KONEC";
                        new Effect.Shake(moneyDisplay);
                   }
                   else {
                       if (bet > money)
                          betInput.value = money;
                       standButton.disabled = true;
                       hitButton.disabled = true;
                       newGameButton.disabled = false;
                       betInput.disabled = false;
                   }
               }
            });
        }
     });
}


function dealersTurnAndEndGame() {
    message.innerHTML = "Delivec je na potezi...";
    dealerCards[2].cardContainer.style.display = "none";
    dealerCards[2].setFaceUp();
    var takeNextCardOrFinish = function() {
       new Effect.SlideDown(dealerCards[dealerCards.count].cardContainer, {
          duration: 0.5,
          queue: "end",
          afterFinish: function() {
              var dealerTotal = getTotal(dealerCards);
              if (dealerCards.count < 5 && dealerTotal <= 16) {
                  dealerCards.count++;
                  dealerCards[dealerCards.count].setCard(deck.nextCard());
		          dealerCards[dealerCards.count].setFaceUp();
                  takeNextCardOrFinish();
              }
              else if (dealerTotal > 21)
                 endGame(true, "Delivec je šel preko 21.");
              else if (dealerCards.count == 5)
                 endGame(false, "Delivec je vzel 5 kart, ne da bi presegel 21.");
              else {
                 var playerTotal = getTotal(playerCards);
                 if (playerTotal > dealerTotal)
                    endGame(true, "Imaš " + playerTotal + ". Delivec ima " + dealerTotal + ".");
                 else if (playerTotal < dealerTotal)
                    endGame(false, "Imaš " + playerTotal + ". Delivec ima " + dealerTotal + ".");
                 else
                    endGame(false, "Z delivcem sta izenačena pri " + playerTotal + ".");
              }
          }
       });
    };
    takeNextCardOrFinish();
}

function hit() {
   if (!gameInProgress)
      return;
   standButton.disabled = true;
   hitButton.disabled = true;
   dealCard(playerCards, function() {
      var playerTotal = getTotal(playerCards);
      if (playerTotal > 21)
         endGame(false, "PREKO 21!");
      else if (playerCards.count == 5)
         endGame(true, "Vzel(-a) si 5 kart, ne da bi presegel(-la) 21.");
      else if (playerTotal == 21)
         dealersTurnAndEndGame();
      else {
         message.innerHTML = "Imaš " + playerTotal + ". Hit ali Stand?";
         hitButton.disabled = false;
         standButton.disabled = false;
      }
   });
}

function stand() {
   if (!gameInProgress)
      return;
   hitButton.disabled = true;
   standButton.disabled = true;
   dealersTurnAndEndGame();
}

onload=setup;

</script>


<!-- CookieCuttr -->
<script type="text/javascript" src="../cc/jquery.cookie.js"></script>
<script type="text/javascript" src="../cc/jquery.cookiecuttr.js"></script>
<link rel="stylesheet" href="../cc/cookiecuttr.css">
<script type="text/javascript" src="../cc/google-analytics.js"></script>
<script type="text/javascript" src="../cc/setup.cookiecuttr.js"></script>


<script>
document.body.addEventListener("keydown", function (event) {
    var code = event.keyCode || event.which;
    var alt  = event.altKey;
    if (alt && code === 33 /* Alt+PgUp */) {
        window.location.replace("../2404/index5.html");
    }
    if (alt && code === 34 /* Alt+PgDn */) {
        window.location.replace("../2404/index7.html");
    }
});
</script>

</body>

</html>
