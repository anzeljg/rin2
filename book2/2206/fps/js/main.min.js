var goog={};goog.global=this;goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.bind=function(a,b){var c=b||goog.global;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}};
goog.partial=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,b);return a.apply(this,c)}};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};goog.asserts={};goog.asserts.assert=function(a,b){if(!a)throw Error(b||"Assert failed");};goog.dom={};goog.dom.classes={};goog.dom.classes.set=function(a,b){a.className=b};
goog.dom.classes.get=function(a){return(a=a.className)&&typeof a.split=="function"?a.split(/\s+/):[]};goog.dom.classes.add=function(a){var b=goog.dom.classes.get(a),c=Array.prototype.slice.call(arguments,1);c=goog.dom.classes.add_(b,c);a.className=b.join(" ");return c};goog.dom.classes.remove=function(a){var b=goog.dom.classes.get(a),c=Array.prototype.slice.call(arguments,1);c=goog.dom.classes.remove_(b,c);a.className=b.join(" ");return c};
goog.dom.classes.add_=function(a,b){for(var c=0,d=0;d<b.length;d++)Array.prototype.indexOf.call(a,b[d])<0&&(a.push(b[d]),c++);return c==b.length};goog.dom.classes.remove_=function(a,b){for(var c=0,d=0;d<a.length;d++)Array.prototype.indexOf.call(b,a[d])>=0&&(Array.prototype.splice.call(a,d--,1),c++);return c==b.length};goog.dom.classes.has=function(a,b){return goog.dom.classes.get(a).indexOf(b)>=0};goog.dom.classes.enable=function(a,b,c){c?goog.dom.classes.add(a,b):goog.dom.classes.remove(a,b)};
goog.dom.classes.toggle=function(a,b){var c=!goog.dom.classes.has(a,b);goog.dom.classes.enable(a,b,c);return c};goog.string={};goog.string.contains=function(a,b){return a.indexOf(b)!=-1};goog.string.trim=function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
goog.string.compareVersions=function(a,b){for(var c=0,d=goog.string.trim(String(a)).split("."),e=goog.string.trim(String(b)).split("."),j=Math.max(d.length,e.length),n=0;c==0&&n<j;n++){var h=d[n]||"",k=e[n]||"",i=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var f=i.exec(h)||["","",""],g=o.exec(k)||["","",""];if(f[0].length==0&&g[0].length==0)break;c=f[1].length==0?0:parseInt(f[1],10);var t=g[1].length==0?0:parseInt(g[1],10);c=goog.string.compareElements_(c,t)||goog.string.compareElements_(f[2].length==
0,g[2].length==0)||goog.string.compareElements_(f[2],g[2])}while(c==0)}return c};goog.string.compareElements_=function(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};goog.userAgent={};goog.userAgent.getUserAgentString=function(){return goog.global.navigator?goog.global.navigator.userAgent:null};goog.userAgent.getNavigator=function(){return goog.global.navigator};
goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=!1;goog.userAgent.detectedIe_=!1;goog.userAgent.detectedWebkit_=!1;goog.userAgent.detectedMobile_=!1;goog.userAgent.detectedGecko_=!1;var a;if(a=goog.userAgent.getUserAgentString()){var b=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=a.indexOf("Opera")==0;goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&a.indexOf("MSIE")!=-1;goog.userAgent.detectedWebkit_=!goog.userAgent.detectedOpera_&&a.indexOf("WebKit")!=-1;goog.userAgent.detectedMobile_=
goog.userAgent.detectedWebkit_&&a.indexOf("Mobile")!=-1;goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&b.product=="Gecko"}};goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.detectedOpera_;goog.userAgent.IE=goog.userAgent.detectedIe_;goog.userAgent.GECKO=goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.detectedMobile_;
goog.userAgent.determinePlatform_=function(){var a=goog.userAgent.getNavigator();return a&&a.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11")};goog.userAgent.initPlatform_();goog.userAgent.MAC=goog.userAgent.detectedMac_;
goog.userAgent.WINDOWS=goog.userAgent.detectedWindows_;goog.userAgent.LINUX=goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.detectedX11_;
goog.userAgent.determineVersion_=function(){var a="",b;goog.userAgent.OPERA&&goog.global.opera?(a=goog.global.opera.version,a=typeof a=="function"?a():a):(goog.userAgent.GECKO?b=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?b=/MSIE\s+([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(b=/WebKit\/(\S+)/),b&&(a=(a=b.exec(goog.userAgent.getUserAgentString()))?a[1]:""));if(goog.userAgent.IE&&(b=goog.userAgent.getDocumentMode_(),b>parseFloat(a)))return String(b);return a};
goog.userAgent.getDocumentMode_=function(){var a=goog.global.document;return a?a.documentMode:void 0};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.isVersionCache_={};goog.userAgent.isVersion=function(a){return goog.userAgent.isVersionCache_[a]||(goog.userAgent.isVersionCache_[a]=goog.string.compareVersions(goog.userAgent.VERSION,a)>=0)};var main={};main.Util={};main.Util.hzToMs=function(a){return 1E3/a};main.EventHost=function(){this.listeners=[]};
main.EventHost.prototype.addListener=function(a){this.listeners.push(a)};main.EventHost.prototype.fire=function(){for(var a=0;a<this.listeners.length;a++)this.listeners[a].apply(null,arguments)};main.Point=function(a,b){this.x=a;this.y=b};main.Point.prototype.setX=function(a){this.x=a;return this};main.Point.prototype.setY=function(a){this.y=a;return this};main.Point.prototype.clone=function(){return new main.Point(this.x,this.y)};main.Size=function(a,b){this.width=a;this.height=b};
main.Size.prototype.clone=function(){return new main.Size(this.width,this.height)};main.Bounds=function(a,b,c,d){this.left=a;this.top=b;this.right=c;this.bottom=d};main.Bounds.forPoint=function(a){return new main.Bounds(a.x,a.y,a.x,a.y)};main.Bounds.prototype.addPoint=function(a){this.left=Math.min(a.x,this.left);this.right=Math.max(a.x,this.right);this.top=Math.min(a.y,this.top);this.bottom=Math.max(a.y,this.bottom)};main.Bounds.prototype.getWidth=function(){return this.right-this.left};
main.Bounds.prototype.getHeight=function(){return this.bottom-this.top};main.MotionBlurSpec=function(a){this.points=a};main.MotionBlurSpec.prototype.getPoints=function(){return this.points};main.MotionBlurSpec.prototype.getBounds=function(){for(var a=main.Bounds.forPoint(this.points[0]),b=1;b<this.points.length;b++)a.addPoint(this.points[b]);return a};main.MotionBlurSpec.forHorizontalLinearPath=function(a){for(var b=[],c=0;c<a;c++)b.push(new main.Point(c-Math.floor(a/2),0));return new main.MotionBlurSpec(b)};
main.MotionBlurSpec.forDiagonalLinearPath=function(a){for(var b=[],c=0;c<a;c++){var d=c-Math.floor(a/2);b.push(new main.Point(d,d))}return new main.MotionBlurSpec(b)};main.MotionBlurConfig=function(a,b){this.enabled=a;this.weight=b||1};main.MotionBlurConfig.fromString=function(a){return a=="Brez"?new main.MotionBlurConfig(!1):new main.MotionBlurConfig(!0,parseFloat(a)+0)};main.MotionBlurConfig.prototype.isEnabled=function(){return this.enabled};main.MotionBlurConfig.prototype.getWeight=function(){return this.weight};
main.MotionBlurConfig.prototype.toString=function(){return this.enabled?""+this.weight:"Brez"};main.MotionBlurConfig.prototype.toFriendlyString=function(){if(this.enabled){if(this.weight==1)return"1.0 (realistična)";var a=""+this.weight;a.indexOf(".")<0&&(a+=".0");return this.weight>1?a+" (velika)":a+" (majhna)"}else return"Brez"};main.DropList=function(){this.selectedEl=this.listEl=this.arrowEl=this.el=null;this.open=!1;this.onchange=new main.EventHost};main.DropList.NAME_FIELD="DLO-name";
main.DropList.prototype.render=function(a){this.el=document.createElement("div");this.el.className="drop-list";this.el.addEventListener("click",goog.bind(this.handleClick_,this),!1);this.buttonEl=document.createElement("div");this.buttonEl.className="drop-list-button";this.el.appendChild(this.buttonEl);this.selectedEl=document.createElement("div");this.selectedEl.className="drop-list-selected";this.buttonEl.appendChild(this.selectedEl);this.arrowEl=document.createElement("div");this.arrowEl.className=
"drop-list-arrow";this.buttonEl.appendChild(this.arrowEl);this.listEl=document.createElement("div");this.listEl.className="drop-list-list";this.listEl.style.display="none";this.listEl.tabIndex=-1;this.listEl.addEventListener("blur",goog.bind(this.setOpen,this,!1),!1);this.el.appendChild(this.listEl);a.appendChild(this.el)};
main.DropList.prototype.createOption=function(a){var b=document.createElement("div");b.className="drop-list-option";b[main.DropList.NAME_FIELD]=a;b.addEventListener("click",goog.bind(this.handleClickOption_,this,a),!1);this.listEl.appendChild(b);return b};main.DropList.prototype.findOptionByName=function(a){for(var b=this.listEl.firstChild;b;){if(b[main.DropList.NAME_FIELD]==a)return b;b=b.nextSibling}};
main.DropList.prototype.getSelected=function(){var a=this.selectedEl.firstChild[main.DropList.NAME_FIELD];goog.asserts.assert(a);return a};main.DropList.prototype.setSelected=function(a){var b=this.findOptionByName(a);goog.asserts.assert(b);this.selectedEl.innerHTML="";this.selectedEl.appendChild(b.cloneNode(!0));this.onchange.fire(a)};main.DropList.prototype.handleClick_=function(a){this.setOpen(!this.open);a.stopPropagation()};
main.DropList.prototype.handleClickOption_=function(a,b){this.setOpen(!1);this.setSelected(a);b.stopPropagation()};main.DropList.prototype.setOpen=function(a){if(a!=this.open){if(this.open=a)this.listEl.style.minWidth=this.el.offsetWidth+"px";goog.dom.classes.enable(this.el,"drop-list-open",this.open);this.listEl.style.display=this.open?"":"none";this.open&&this.listEl.focus()}};
main.Spinner=function(){this.el=document.createElement("div");goog.dom.classes.add(this.el,"spinner");document.body.appendChild(this.el);var a=document.createElement("img");a.src="fps/images/spinner-black.gif";goog.dom.classes.add(a,"spinner-img");this.el.appendChild(a);this.messageEl=document.createElement("div");goog.dom.classes.add(this.messageEl,"spinner-message");this.el.appendChild(this.messageEl);this.spinDisplayed=!1;this.spinEntries=[];this.spinTimeout=null};
main.Spinner.SpinEntry=function(a,b){this.spinner=a;this.message=b||null};main.Spinner.SpinEntry.prototype.release=function(){if(this.spinner)this.spinner.releaseSpin(this),this.spinner=null};main.Spinner.getInstance=function(){if(main.Spinner.instance==null)main.Spinner.instance=new main.Spinner;return main.Spinner.instance};main.Spinner.prototype.getSpinDepth=function(){return this.spinEntries.length};
main.Spinner.prototype.spin=function(a,b){var c=new main.Spinner.SpinEntry(this,b);this.spinEntries.push(c);if(a&&this.getSpinDepth()==1){if(!this.spinTimeout)this.spinTimeout=window.setTimeout(goog.bind(this.handleTimeout,this),a)}else this.spinDisplayed=this.getSpinDepth()>0,this.updateDisplay();return c};main.Spinner.prototype.releaseSpin=function(a){this.spinEntries.splice(this.spinEntries.indexOf(a),1);this.spinDisplayed=this.getSpinDepth()>0;this.updateDisplay()};
main.Spinner.prototype.handleTimeout=function(){this.spinDisplayed=this.getSpinDepth()>0;this.updateDisplay();delete this.spinTimeout};
main.Spinner.prototype.updateDisplay=function(){this.el.style.display=this.spinDisplayed?"":"none";for(var a,b=0;b<this.spinEntries.length;b++)a=this.spinEntries[b].message||a;this.messageEl.style.display=a?"":"none";if(a)this.messageEl.innerHTML="",this.messageEl.appendChild(document.createTextNode(a));this.el.style.marginLeft=-(this.el.offsetWidth/2)+"px";this.el.style.marginTop=-(this.el.offsetHeight/2)+"px"};
main.AnimationManager=function(){this.running=!1;this.startTimeMs=this.timer=null;this.frameNumber=0;this.animations=[]};main.AnimationManager.prototype.addAnimation=function(a){this.animations.push(a);a.setManager(this);this.running&&a.start()};main.AnimationManager.prototype.removeAnimation=function(a){var b=this.animations.indexOf(a);goog.asserts.assert(b>=0);this.animations.splice(b,1);a.setManager(null)};main.AnimationManager.prototype.getAnimations=function(){return this.animations};
main.AnimationManager.prototype.getFrameNumber=function(){return this.frameNumber};main.AnimationManager.prototype.start=function(){if(!this.running){this.startTimeMs=(new Date).getTime();this.frameNumber=0;this.timer=window.setInterval(goog.bind(this.handleTick,this),1);this.running=!0;for(var a=0;a<this.animations.length;a++)this.animations[a].start()}};
main.AnimationManager.prototype.stop=function(){if(this.running){window.clearInterval(this.timer);this.timer=null;this.running=!1;for(var a=0;a<this.animations.length;a++)this.animations[a].stop()}};main.AnimationManager.prototype.handleTick=function(){this.frameNumber++;for(var a=(new Date).getTime()-this.startTimeMs,b=0;b<this.animations.length;b++){var c=this.animations[b],d=main.Util.hzToMs(c.getFramesPerSecond());c.lastStepTimeMs<d*Math.floor(a/d)&&c.step(a)}};
main.Animation=function(a){this.framesPerSecond=a;this.frameNumber=0;this.manager=this.lastStepTimeMs=null;this.frameRateMonitor=new main.FrameRateMonitor(this)};main.Animation.prototype.setManager=function(a){goog.asserts.assert(a==null||this.manager==null);this.manager=a};main.Animation.prototype.getManager=function(){return this.manager};main.Animation.prototype.getFramesPerSecond=function(){return this.framesPerSecond};
main.Animation.prototype.setFramesPerSecond=function(a){this.framesPerSecond=a};main.Animation.prototype.getFrameNumber=function(){return this.frameNumber};main.Animation.prototype.getFrameRateMonitor=function(){return this.frameRateMonitor};main.Animation.prototype.start=function(){};main.Animation.prototype.stop=function(){};main.Animation.prototype.step=function(a){this.frameNumber++;this.lastStepTimeMs=a;this.frameRateMonitor.step()};
main.PaintRateMonitor=function(){main.Animation.call(this,2);goog.asserts.assert(main.PaintRateMonitor.isAvailable());this.paintCountHistory_=[]};goog.inherits(main.PaintRateMonitor,main.Animation);main.PaintRateMonitor.monitors_=[];main.PaintRateMonitor.registerMonitor=function(a){main.PaintRateMonitor.monitors_.push(a)};
main.PaintRateMonitor.getAvailableMonitor_=function(){for(var a=0;a<main.PaintRateMonitor.monitors_.length;a++)if(main.PaintRateMonitor.monitors_[a].isAvailable())return main.PaintRateMonitor.monitors_[a];return null};main.PaintRateMonitor.isAvailable=function(){return!!main.PaintRateMonitor.getAvailableMonitor_()};main.PaintRateMonitor.create=function(){var a=main.PaintRateMonitor.getAvailableMonitor_();if(a)return new a;else throw Error("No PaintRateMonitors available");};
main.PaintRateMonitor.prototype.getPaintsPerSecond=function(){if(this.paintCountHistory_.length>1){var a=this.paintCountHistory_[this.paintCountHistory_.length-2],b=this.paintCountHistory_[this.paintCountHistory_.length-1];return(b.count-a.count)/((b.timeMs-a.timeMs)/1E3)}return 0};
main.PaintRateMonitor.prototype.step=function(a){main.PaintRateMonitor.superClass_.step.call(this,a);for(var b=this.getCurrentPaintCount_();this.paintCountHistory_.length>3;)this.paintCountHistory_.splice(0,1);this.paintCountHistory_.push({count:b,timeMs:a})};main.MozillaPaintRateMonitor=function(){main.PaintRateMonitor.call(this);goog.asserts.assert(main.MozillaPaintRateMonitor.isAvailable())};goog.inherits(main.MozillaPaintRateMonitor,main.PaintRateMonitor);main.PaintRateMonitor.registerMonitor(main.MozillaPaintRateMonitor);
main.MozillaPaintRateMonitor.isAvailable=function(){return"mozPaintCount"in window};main.MozillaPaintRateMonitor.prototype.getCurrentPaintCount_=function(){return window.mozPaintCount};main.MozillaPaintRateMonitor.prototype.isAccurate=function(){return!0};
main.ChromePaintRateMonitor=function(){main.PaintRateMonitor.call(this);goog.asserts.assert(main.ChromePaintRateMonitor.isAvailable());this.running_=!1;this.chromePaintCount_=0;this.handleAnimationFrameCallback_=goog.bind(this.handleAnimationFrame_,this)};goog.inherits(main.ChromePaintRateMonitor,main.PaintRateMonitor);main.PaintRateMonitor.registerMonitor(main.ChromePaintRateMonitor);main.ChromePaintRateMonitor.isAvailable=function(){return"webkitRequestAnimationFrame"in window};
main.ChromePaintRateMonitor.prototype.getCurrentPaintCount_=function(){return this.chromePaintCount_};main.ChromePaintRateMonitor.prototype.isAccurate=function(){return!1};main.ChromePaintRateMonitor.prototype.start=function(){main.ChromePaintRateMonitor.superClass_.start.call(this);this.running_=!0;this.maybeRequestFrame_()};main.ChromePaintRateMonitor.prototype.stop=function(){main.ChromePaintRateMonitor.superClass_.stop.call(this);this.running_=!1};
main.ChromePaintRateMonitor.prototype.maybeRequestFrame_=function(){this.running_&&window.webkitRequestAnimationFrame(this.handleAnimationFrameCallback_)};main.ChromePaintRateMonitor.prototype.handleAnimationFrame_=function(){this.chromePaintCount_++;this.maybeRequestFrame_()};main.FrameRateMonitor=function(a){this.animation=a;this.frameHistory=[];this.lastAnnounceTimeMs=0};main.FrameRateMonitor.HISTORY_SECONDS=2;
main.FrameRateMonitor.prototype.step=function(){for(var a=(new Date).getTime();this.frameHistory.length&&this.frameHistory[0]<=a-main.FrameRateMonitor.HISTORY_SECONDS*1E3;)this.frameHistory.splice(0,1);this.frameHistory.push(a);if(a>this.lastAnnounceTimeMs+5E3)this.lastAnnounceTimeMs=a};main.FrameRateMonitor.prototype.getFrameRate=function(){return this.frameHistory.length/main.FrameRateMonitor.HISTORY_SECONDS};
main.FrameRateMonitor.prototype.getFrameVariance=function(){for(var a=(this.frameHistory[this.frameHistory.length-1]-this.frameHistory[0])/(this.frameHistory.length-1),b=0,c=0;c<this.frameHistory.length-1;c++){var d=this.frameHistory[c+1]-this.frameHistory[c];b+=(d-a)*(d-a)}return b/(this.frameHistory.length-1)};
main.FramesIndicator=function(a){main.Animation.call(this,2);this.el=a;this.el.addEventListener("mouseover",goog.bind(this.setFullDisplay,this,!0),!1);this.el.addEventListener("mouseout",goog.bind(this.setFullDisplay,this,!1),!1);this.tableEl=document.createElement("table");this.el.appendChild(this.tableEl);this.arrowEl=document.createElement("div");goog.dom.classes.add(this.arrowEl,"frames-indicator-arrow");this.el.appendChild(this.arrowEl);this.ballEl=document.createElement("div");goog.dom.classes.add(this.ballEl,
"frames-indicator-ball","error");this.el.appendChild(this.ballEl);this.fullDisplay=null;this.setFullDisplay(!1);a=this.addRow();this.addCell(a,"");this.addCell(a,"Okvirjev na sekundo");this.addCell(a,"Napaka merjenja (stddev)")};goog.inherits(main.FramesIndicator,main.Animation);main.FramesIndicator.prototype.step=function(a){main.FramesIndicator.superClass_.step.call(this,a);this.renderDisplay()};
main.FramesIndicator.prototype.setFullDisplay=function(a){this.fullDisplay=a;this.tableEl.style.display=this.fullDisplay?"":"none";this.arrowEl.style.display=this.fullDisplay?"none":""};main.FramesIndicator.prototype.addRow=function(){var a=document.createElement("tr");this.tableEl.appendChild(a);return a};main.FramesIndicator.prototype.addCell=function(a,b,c){var d=document.createElement("td");if(c)d.className=c;a.appendChild(d);d.appendChild(document.createTextNode(b));return d};
main.FramesIndicator.prototype.renderDisplay=function(){for(;this.tableEl.firstChild.nextSibling;)this.tableEl.removeChild(this.tableEl.firstChild.nextSibling);for(var a=!1,b=!1,c=this.manager.getAnimations(),d=null,e=0,j=0,n=0;n<c.length;n++)if(c[n]instanceof main.PaintRateMonitor&&(d=c[n]),c[n]instanceof main.SpriteBounceAnimation){var h=this.addRow();e++;this.addCell(h,"Animacija "+e,"name");var k=c[n].getFrameRateMonitor(),i=k.getFrameRate(),o=c[n].getFramesPerSecond(),f=Math.abs(i-o)/o*100;k=
Math.sqrt(k.getFrameVariance());j=Math.max(j,o);i=this.addCell(h,Math.round(i)+" / "+o);f>20?(b=!0,goog.dom.classes.add(i,"error")):f>5&&(a=!0,goog.dom.classes.add(i,"warning"));f=""+Math.round(k*100)/100;f.indexOf(".")<0?f+=".00":f[f.length-3]!="."&&(f+="0");h=this.addCell(h,f+" ms");k>10?(b=!0,goog.dom.classes.add(h,"error")):k>5&&(a=!0,goog.dom.classes.add(h,"warning"))}if(d){h=this.addRow();c=d.isAccurate();e=this.addCell(h,"Osveževanje brskalnika"+(c?"":" (napačno)"),"name");if(!c)e.title="The method used to determine paint rate is not correct for this browser.";
e=d.getPaintsPerSecond();d=(j-e)/j*100;j=this.addCell(h,Math.round(e)+" / "+j);d>20?(c&&(b=!0),goog.dom.classes.add(j,"error")):d>5&&(c&&(a=!0),goog.dom.classes.add(j,"warning"));this.addCell(h,"")}goog.dom.classes.remove(this.ballEl,"warning","error");b?goog.dom.classes.add(this.ballEl,"error"):a&&goog.dom.classes.add(this.ballEl,"warning")};main.BounceAnimation=function(a,b,c,d){main.Animation.call(this,a);this.velocityPxPerSec=b;this.min=c;this.max=d};goog.inherits(main.BounceAnimation,main.Animation);
main.BounceAnimation.prototype.move=function(){};main.BounceAnimation.prototype.setVelocity=function(a){this.velocityPxPerSec=a};main.BounceAnimation.prototype.getVelocity=function(){return this.velocityPxPerSec};main.BounceAnimation.prototype.setRange=function(a,b){this.min=a;this.max=b};
main.BounceAnimation.prototype.step=function(a){main.BounceAnimation.superClass_.step.call(this,a);var b=this.velocityPxPerSec*a/1E3;a=this.max-this.min;var c=a*2;b-=c*Math.floor(b/c);this.move(Math.floor(b<a?b+this.min:2*a-b+this.min))};main.SpriteBounceAnimation=function(a,b,c){main.BounceAnimation.call(this,b,c,0,0);this.sprite=a;this.motionBlurConfig=new main.MotionBlurConfig(!1);this.sprite.isLoaded()?this.handleLoad():this.sprite.onload.addListener(goog.bind(this.handleLoad,this))};
goog.inherits(main.SpriteBounceAnimation,main.BounceAnimation);main.SpriteBounceAnimation.prototype.setMotionBlur=function(a){this.motionBlurConfig=a;this.updateMotionBlur()};main.SpriteBounceAnimation.prototype.updateMotionBlur=function(){this.motionBlurConfig.isEnabled()||this.sprite.setMotionBlur(null)};main.SpriteBounceAnimation.prototype.setFramesPerSecond=function(a){main.SpriteBounceAnimation.superClass_.setFramesPerSecond.call(this,a);this.updateMotionBlur()};
main.SpriteBounceAnimation.prototype.setVelocity=function(a){main.SpriteBounceAnimation.superClass_.setVelocity.call(this,a);this.updateMotionBlur()};main.SpriteBounceAnimation.prototype.setRange=function(a,b){main.SpriteBounceAnimation.superClass_.setRange.call(this,a,b)};main.SpriteBounceAnimation.prototype.move=function(){};main.SpriteBounceAnimation.prototype.handleLoad=function(){};main.BallBounceAnimation=function(a,b,c){main.SpriteBounceAnimation.call(this,a,b,c)};
goog.inherits(main.BallBounceAnimation,main.SpriteBounceAnimation);main.BallBounceAnimation.prototype.updateMotionBlur=function(){main.BallBounceAnimation.superClass_.updateMotionBlur.call(this);if(this.motionBlurConfig.isEnabled()){var a=Math.max(1,Math.ceil(this.getVelocity()/this.getFramesPerSecond())*this.motionBlurConfig.getWeight());this.sprite.setMotionBlur(main.MotionBlurSpec.forHorizontalLinearPath(a))}};main.BallBounceAnimation.prototype.move=function(a){this.sprite.setLeft(a)};
main.BallBounceAnimation.prototype.handleLoad=function(){this.setRange(0,this.sprite.getContainer().getSize().width-this.sprite.getSize().width)};main.BackgroundBounceAnimation=function(a,b,c){main.SpriteBounceAnimation.call(this,a,b,c)};goog.inherits(main.BackgroundBounceAnimation,main.SpriteBounceAnimation);
main.BackgroundBounceAnimation.prototype.updateMotionBlur=function(){main.BackgroundBounceAnimation.superClass_.updateMotionBlur.call(this);if(this.motionBlurConfig.isEnabled()){var a=Math.max(1,Math.ceil(this.getVelocity()/this.getFramesPerSecond())*this.motionBlurConfig.getWeight());this.sprite.setMotionBlur(main.MotionBlurSpec.forDiagonalLinearPath(a))}};main.BackgroundBounceAnimation.prototype.move=function(a){this.sprite.setLeft(a);this.sprite.setTop(a)};
main.BackgroundBounceAnimation.prototype.handleLoad=function(){var a=this.sprite.getContainer().getSize(),b=this.sprite.getSize();this.setRange(-Math.min(b.width-a.width,b.height,a.height),0)};main.DetectRefreshRates=function(){this.onstatechange=new main.EventHost;this.state=main.DetectRefreshRates.State.NONE;this.screenRefreshRates=null;this.startLookupOnFrameLoad=!1;this.window=window;this.document=document;this.frameDetectRefreshRates=this.iframe=null};
main.DetectRefreshRates.getInstance=function(){if(main.DetectRefreshRates.instance==null)main.DetectRefreshRates.instance=new main.DetectRefreshRates;return main.DetectRefreshRates.instance};main.DetectRefreshRates.JAVA_VERSION_MATCHER="1.5+";main.DetectRefreshRates.State={NONE:"NONE",LOADING_JAVA:"LOADING_JAVA",LOADING_JAVA_ERROR:"LOADING_JAVA_ERROR",JAVA_MISSING:"JAVA_MISSING",LOADING_APPLET:"LOADING_APPLET",LOADING_APPLET_TIMEOUT:"LOADING_APPLET_TIMEOUT",COMPLETE:"COMPLETE"};
main.DetectRefreshRates.prototype.startLookup=function(){function a(){++c;c==2&&this.handleJavaLoad()}function b(){d||(d=!0,this.handleJavaError())}goog.asserts.assert(this.state==main.DetectRefreshRates.State.NONE,"Nepričakovano stanje: "+this.state);if(!this.iframe){var c=0,d=!1;this.stateChange(main.DetectRefreshRates.State.LOADING_JAVA);this.iframe=this.document.createElement("iframe");this.iframe.style.visibility="hidden";this.iframe.style.width="0px";this.iframe.style.height="0px";this.iframe.style.position=
"absolute";this.iframe.style.left="0px";this.iframe.style.top="0px";this.iframe.setAttribute("src","detect-refresh-rates.htm");this.iframe.addEventListener("load",goog.bind(a,this),!1);this.iframe.addEventListener("error",goog.bind(b,this),!1);this.document.body.appendChild(this.iframe);var e=this.document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src","http://java.com/js/deployJava.js");e.addEventListener("load",goog.bind(a,this),!1);e.addEventListener("error",
goog.bind(b,this),!1);this.document.getElementsByTagName("head")[0].appendChild(e)}};main.DetectRefreshRates.prototype.getState=function(){return this.state};main.DetectRefreshRates.prototype.stateChange=function(a){this.state=a;this.onstatechange.fire(this.state)};main.DetectRefreshRates.prototype.getScreenRefreshRates=function(){return this.screenRefreshRates};
main.DetectRefreshRates.prototype.handleJavaLoad=function(){this.frameDetectRefreshRates=this.iframe.contentWindow.detectRefreshRates;this.javaDeploy=this.window.deployJava;goog.asserts.assert(this.javaDeploy&&this.frameDetectRefreshRates,"Expected javaDeploy and frameDetectRefreshRates to have loaded");this.javaDeploy.returnPage=this.window.location.href;this.frameDetectRefreshRates.getJavaMissing()?this.stateChange(main.DetectRefreshRates.State.JAVA_MISSING):(this.stateChange(main.DetectRefreshRates.State.LOADING_APPLET),
this.appletPollInterval=this.window.setInterval(goog.bind(this.handleAppletPoll,this),500),this.appletPollStartTimeMs=(new Date).getTime())};main.DetectRefreshRates.prototype.installJava=function(){this.javaDeploy.installJRE(main.DetectRefreshRates.JAVA_VERSION_MATCHER)};
main.DetectRefreshRates.prototype.handleAppletPoll=function(){var a=(new Date).getTime(),b=this.frameDetectRefreshRates.getRefreshRates();if(b||!(a<this.appletPollStartTimeMs+6E4))this.window.clearInterval(this.appletPollInterval),b?(this.screenRefreshRates=b,this.stateChange(main.DetectRefreshRates.State.COMPLETE)):this.stateChange(main.DetectRefreshRates.State.LOADING_APPLET_TIMEOUT)};main.DetectRefreshRates.prototype.handleJavaError=function(){this.stateChange(main.DetectRefreshRates.State.LOADING_JAVA_ERROR)};
main.VideoSizes={VHS:new main.Size(480,320),DVD:new main.Size(720,480),SEVEN_TWENTY_P:new main.Size(1280,720)};main.SpriteContainer=function(a,b){this.containerEl=a;this.sprites={};this.spriteWrappers={};this.nextSpriteId=0;this.setSize(b)};main.SpriteContainer.prototype.setSize=function(a){this.containerEl.style.width=a.width+"px";this.containerEl.style.height=a.height+"px"};main.SpriteContainer.prototype.getSize=function(){return new main.Size(this.containerEl.offsetWidth,this.containerEl.offsetHeight)};
main.SpriteContainer.prototype.addSprite=function(a){this.addSpriteBefore(a,null)};main.SpriteContainer.prototype.addSpriteBefore=function(a,b){var c=document.createElement("div");c.style.position="relative";c.style.width="0px";c.style.height="0px";c.appendChild(a.getElement());a.spriteId=this.nextSpriteId++;this.sprites[a.spriteId]=a;this.spriteWrappers[a.spriteId]=c;a.setContainer(this);this.containerEl.insertBefore(c,b?this.spriteWrappers[b.spriteId]:null);this.positionSprite(a)};
main.SpriteContainer.prototype.removeSprite=function(a){a.spriteId in this.sprites&&(delete this.sprites[a.spriteId],this.containerEl.removeChild(this.spriteWrappers[a.spriteId]),delete this.spriteWrappers[a.spriteId],a.setContainer(null))};main.SpriteContainer.prototype.positionSprite=function(a){var b=this.spriteWrappers[a.spriteId];goog.asserts.assert(b);a=a.getPosition();b.style.left=a.x+"px";b.style.top=a.y+"px"};
main.Sprite=function(){this.container=this.motionBlurSpec=null;this.pos=new main.Point(0,0);this.loaded=!1;this.onload=new main.EventHost};main.Sprite.prototype.isLoaded=function(){return this.loaded};main.Sprite.prototype.setTop=function(a){this.move(this.getPosition().setY(a))};main.Sprite.prototype.setLeft=function(a){this.move(this.getPosition().setX(a))};main.Sprite.prototype.move=function(a){this.pos=a;this.container&&this.container.positionSprite(this)};main.Sprite.prototype.getPosition=function(){return this.pos.clone()};
main.Sprite.prototype.setContainer=function(a){goog.asserts.assert(a==null||this.container==null);this.container=a};main.Sprite.prototype.getContainer=function(){return this.container};main.Sprite.prototype.setMotionBlur=function(a){this.motionBlurSpec=a};
main.ImageSprite=function(a,b,c){main.Sprite.call(this);this.img=new Image;this.img.addEventListener("load",goog.bind(function(){window.setTimeout(goog.bind(this.handleLoad,this),1)},this),!1);this.imgLoadSpin=main.Spinner.getInstance().spin(100,"Nalaganje slike...");this.imgWidth=b;this.imgHeight=c;this.topOffset=this.leftOffset=0;this.el=document.createElement("div");this.canvas=document.createElement("canvas");this.el.appendChild(this.canvas);this.ctx=this.canvas.getContext("2d");this.canvasHeight=
this.canvasWidth=null;this.imgCanvas=document.createElement("canvas");this.imgCtx=this.imgCanvas.getContext("2d");this.img.src=a};goog.inherits(main.ImageSprite,main.Sprite);main.ImageSprite.prototype.setMotionBlur=function(a){main.ImageSprite.superClass_.setMotionBlur.call(this,a);this.loaded&&this.draw()};main.ImageSprite.prototype.getElement=function(){return this.el};
main.ImageSprite.prototype.handleLoad=function(){this.imgWidth=this.imgWidth||this.img.width;this.imgHeight=this.imgHeight||this.img.height;if(this.drawImgCanvas()){if(this.imgLoadSpin.release(),this.imgLoadSpin=null,this.draw(!0),!this.loaded)this.loaded=!0,this.onload.fire()}else window.setTimeout(goog.bind(this.handleLoad,this),100)};main.ImageSprite.prototype.getSize=function(){return new main.Size(this.imgWidth,this.imgHeight)};
main.ImageSprite.prototype.drawImgCanvas=function(){this.imgCanvas.width=this.imgWidth;this.imgCanvas.height=this.imgHeight;this.imgCtx.clearRect(0,0,this.imgWidth,this.imgHeight);this.imgCtx.drawImage(this.img,0,0,this.imgWidth,this.imgHeight);for(var a=this.imgCtx.getImageData(0,0,this.imgWidth,this.imgHeight).data,b=a.length,c=0;c<b;c++)if(a[c]!=0)return!0;return!1};
main.ImageSprite.prototype.draw=function(a){var b=this.motionBlurSpec?this.motionBlurSpec.getBounds():new main.Bounds(0,0,0,0);this.leftOffset=b.left;this.topOffset=b.top;this.canvasWidth=this.imgWidth+b.getWidth();this.canvasHeight=this.imgHeight+b.getHeight();this.el.width=this.imgWidth;this.el.height=this.imgHeight;this.canvas.style.left=this.leftOffset+"px";this.canvas.style.top=this.topOffset+"px";(a||!this.motionBlurSpec)&&this.drawPlain();this.motionBlurSpec&&this.drawMotionBlur()};
main.ImageSprite.prototype.drawPlain=function(){this.canvas.width=this.canvasWidth;this.canvas.height=this.canvasHeight;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);this.ctx.drawImage(this.img,0,0,this.imgWidth,this.imgHeight)};
main.ImageSprite.prototype.drawMotionBlurNaiveAdditive=function(){var a=this.imgCtx.getImageData(0,0,this.imgWidth,this.imgHeight).data,b=this.ctx.createImageData(this.canvasWidth,this.canvasHeight),c=b.data,d=this.motionBlurSpec.getPoints(),e=d.length,j=main.Spinner.getInstance().spin(100,"Generating motion blur..."),n=this.leftOffset,h=this.topOffset,k=this.canvasWidth,i=this.canvasHeight,o=0,f=0,g=0,t=goog.bind(function(){if(!(this.leftOffset!=n||this.topOffset!=h||this.canvasWidth!=k||this.canvasHeight!=
i)){for(var p=0,v=(new Date).getTime(),u=function(a){p-=a;if(p<=0){if((new Date).getTime()-v>10)return window.setTimeout(t,0),!0;p=1E4}return!1};o<a.length;o++)if(a[o]/=e,u(1))return;for(;f<e;){for(var w=d[f];g<this.imgHeight;){for(var r=0;r<this.imgWidth;r++){var l=r+w.x-n,m=g+w.y-h;if(!(l<0||l>=k||m<0||m>=i)){var s=(g*this.imgWidth+r)*4;l=(m*k+l)*4;for(m=0;m<4;m++)c[l+m]+=a[s+m]}}g++;if(u(this.imgWidth*10))return}g=0;f++}this.canvas.width=k;this.canvas.height=i;this.ctx.putImageData(b,0,0)}j.release()},
this);window.setTimeout(t,0)};
main.ImageSprite.prototype.drawMotionBlurAlphaAwareAdditive=function(){var a=this.imgCtx.getImageData(0,0,this.imgWidth,this.imgHeight).data,b=this.ctx.createImageData(this.canvasWidth,this.canvasHeight),c=b.data,d=Array(c.length),e=this.motionBlurSpec.getPoints(),j=e.length,n=main.Spinner.getInstance().spin(100,"Generating motion blur..."),h=this.leftOffset,k=this.topOffset,i=this.canvasWidth,o=this.canvasHeight,f=0,g=0,t=0,p=0,v=goog.bind(function(){if(!(this.leftOffset!=h||this.topOffset!=k||this.canvasWidth!=
i||this.canvasHeight!=o)){for(var u=0,w=(new Date).getTime(),r=function(a){u-=a;if(u<=0){if((new Date).getTime()-w>10)return window.setTimeout(v,0),!0;u=1E4}return!1};f<c.length;f++)if(d[f]=0,r(1))return;for(;t<j;){for(var l=e[t];p<this.imgHeight;){for(var m=0;m<this.imgWidth;m++){var s=m+l.x-h,q=p+l.y-k;if(!(s<0||s>=i||q<0||q>=o)){var x=(p*this.imgWidth+m)*4,y=(q*i+s)*4;s=a[x+3];d[y+3]+=s;for(q=0;q<3;q++)d[y+q]+=a[x+q]*s}}p++;if(r(this.imgWidth*10))return}p=0;t++}for(;g<c.length;g+=4){l=g;s=d[l+
3];c[l+3]=s/j;if(s)for(q=0;q<3;q++)c[l+q]=d[l+q]/s;if(r(4))return}this.canvas.width=i;this.canvas.height=o;this.ctx.putImageData(b,0,0)}n.release()},this);window.setTimeout(v,0)};
main.ImageSprite.prototype.drawMotionBlurAlphaCompositeAttempt=function(){for(var a=this.imgCtx.getImageData(0,0,this.imgWidth,this.imgHeight).data,b=this.ctx.createImageData(this.canvasWidth,this.canvasHeight),c=b.data,d=0;d<c.length/4;d++)c[4*d+0]=255,c[4*d+1]=255,c[4*d+2]=255,c[4*d+3]=255;var e=this.motionBlurSpec.getPoints(),j=e.length,n=main.Spinner.getInstance().spin(100,"Generating motion blur..."),h=this.leftOffset,k=this.topOffset,i=this.canvasWidth,o=this.canvasHeight,f=d=0,g=0,t=goog.bind(function(){if(!(this.leftOffset!=
h||this.topOffset!=k||this.canvasWidth!=i||this.canvasHeight!=o)){for(var p=0,v=(new Date).getTime(),u=function(a){p-=a;if(p<=0){if((new Date).getTime()-v>10)return window.setTimeout(t,0),!0;p=1E4}return!1};d<j;){for(var w=e[d];g<this.imgHeight;){for(var r=0;r<this.imgWidth;r++){var l=r+w.x-h,m=g+w.y-k;if(!(l<0||l>=i||m<0||m>=o)){var s=(g*this.imgWidth+r)*4;l=(m*i+l)*4;m=a[s+3]/255/j;var q=c[l+3]/255;c[l+3]=(m+q*(1-m))*255;for(var x=0;x<3;x++)c[l+x]=a[s+x]*m+c[l+x]*q*(1-m)}}g++;if(u(this.imgWidth*
10))return}g=0;d++}for(;f<c.length;)if(c[f]=Math.round(c[f]),f++,u(1))return;this.canvas.width=i;this.canvas.height=o;this.ctx.putImageData(b,0,0)}n.release()},this);window.setTimeout(t,0)};
main.ImageSprite.prototype.drawMotionBlurAlphaReduceCanvasComposite=function(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);var a=document.createElement("canvas");a.width=this.imgWidth;a.height=this.imgHeight;var b=a.getContext("2d");b.clearRect(0,0,this.imgWidth,this.imgHeight);b.drawImage(this.img,0,0,this.imgWidth,this.imgHeight);var c=b.getImageData(0,0,this.imgWidth,this.imgHeight),d=c.data,e=this.motionBlurSpec.getPoints(),j=e.length,n=main.Spinner.getInstance().spin(100,"Generating motion blur..."),
h=this.leftOffset,k=this.topOffset,i=this.canvasWidth,o=this.canvasHeight,f=0,g=0,t=!1,p=goog.bind(function(){if(!(this.leftOffset!=h||this.topOffset!=k||this.canvasWidth!=i||this.canvasHeight!=o)){this.canvas.width=i;this.canvas.height=o;this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);for(var v=0,u=(new Date).getTime(),w=function(a){v-=a;if(v<=0){if((new Date).getTime()-u>10)return window.setTimeout(p,0),!0;v=1E4}return!1};f<d.length;f+=4)if(d[f+3]/=j,w(1))return;t||(b.putImageData(c,
0,0),t=!0);for(;g<j;){var r=e[g];this.ctx.drawImage(a,r.x-h,r.y-k,this.imgWidth,this.imgHeight);if(w(100))return;g++}}n.release()},this);window.setTimeout(p,0)};main.ImageSprite.prototype.drawMotionBlur=main.ImageSprite.prototype.drawMotionBlurAlphaAwareAdditive;main.ImageAsset=function(a,b,c,d){this.name=a;this.src=b;this.thumbSrc=c;this.attribLink=d};main.BACKGROUND_NAMES={AUTUMN:"Jesen",AUTUMN2:"Jesen 2",FOREST:"Gozd",MILKY_WAY:"Mlečna cesta",RIVER:"Reka",STARS:"Zvezde",SUNSET:"Sončni zahod",WINTER:"Zima"};
main.BACKGROUND_IMAGE_ASSETS=[new main.ImageAsset(main.BACKGROUND_NAMES.AUTUMN,"fps/images/backgrounds/autumn.jpg","fps/images/backgrounds/thumbs/autumn.jpg","http://commons.wikimedia.org/wiki/File:Autumn_on_the_Indiana_University_campus.jpg"),new main.ImageAsset(main.BACKGROUND_NAMES.AUTUMN2,"fps/images/backgrounds/autumn2.jpg","fps/images/backgrounds/thumbs/autumn2.jpg","http://commons.wikimedia.org/wiki/File:Autumn_scenery.jpg"),new main.ImageAsset(main.BACKGROUND_NAMES.FOREST,"fps/images/backgrounds/forest.jpg",
"fps/images/backgrounds/thumbs/forest.jpg","http://commons.wikimedia.org/wiki/File:Dunns_Pond_Mound.jpg"),new main.ImageAsset(main.BACKGROUND_NAMES.MILKY_WAY,"fps/images/backgrounds/milky-way.jpg","fps/images/backgrounds/thumbs/milky-way.jpg","http://commons.wikimedia.org/wiki/File:ESO-VLT-Laser-phot-33a-07.jpg"),new main.ImageAsset(main.BACKGROUND_NAMES.RIVER,"fps/images/backgrounds/river.jpg","fps/images/backgrounds/thumbs/river.jpg","http://commons.wikimedia.org/wiki/File:Blanchard_River_at_Gilboa.jpg"),new main.ImageAsset(main.BACKGROUND_NAMES.STARS,
"fps/images/backgrounds/stars.jpg","fps/images/backgrounds/thumbs/stars.jpg","http://commons.wikimedia.org/wiki/File:Central_region_of_the_Milky_Way.jpg"),new main.ImageAsset(main.BACKGROUND_NAMES.SUNSET,"fps/images/backgrounds/sunset.jpg","fps/images/backgrounds/thumbs/sunset.jpg","http://commons.wikimedia.org/wiki/File:Sunset_on_the_Victoria_lake.JPG"),new main.ImageAsset(main.BACKGROUND_NAMES.WINTER,"fps/images/backgrounds/winter.jpg","fps/images/backgrounds/thumbs/winter.jpg","http://commons.wikimedia.org/wiki/File:Wintry_scenery.jpg")];
main.BALL_NAMES={SOCCER_BALL:"Nogometna žoga",BASEBALL:"Žoga za baseball",WORLD_CUP_FOOTBALL:"Adidas Wawa Aba",MOON:"Luna",SPHERE:"Krogla"};
main.BALL_IMAGE_ASSETS=[new main.ImageAsset(main.BALL_NAMES.SOCCER_BALL,"fps/images/sprites/ball1.png","fps/images/sprites/thumbs/ball1.png","http://commons.wikimedia.org/wiki/File:Soccer_ball.svg"),new main.ImageAsset(main.BALL_NAMES.BASEBALL,"fps/images/sprites/ball2.png","fps/images/sprites/thumbs/ball2.png","http://commons.wikimedia.org/wiki/File:Baseball_(crop).jpg"),new main.ImageAsset(main.BALL_NAMES.WORLD_CUP_FOOTBALL,"fps/images/sprites/ball3.png","fps/images/sprites/thumbs/ball3.png","http://commons.wikimedia.org/wiki/File:Adidas_African_Cup_of_Nations_2008_match_ball_Wawa_Aba.jpg"),
new main.ImageAsset(main.BALL_NAMES.MOON,"fps/images/sprites/moon.png","fps/images/sprites/thumbs/moon.png","http://commons.wikimedia.org/wiki/File:Full_moon.png"),new main.ImageAsset(main.BALL_NAMES.SPHERE,"fps/images/sprites/sphere.png","fps/images/sprites/thumbs/sphere.png","http://commons.wikimedia.org/wiki/File:Blue-sphere.png")];
main.GOOD_SPRITE_PAIRINGS=[{background:main.BACKGROUND_NAMES.RIVER,ball:main.BALL_NAMES.BASEBALL},{background:main.BACKGROUND_NAMES.AUTUMN,ball:main.BALL_NAMES.SOCCER_BALL},{background:main.BACKGROUND_NAMES.MILKY_WAY,ball:main.BALL_NAMES.MOON},{background:main.BACKGROUND_NAMES.SUNSET,ball:main.BALL_NAMES.SPHERE},{background:main.BACKGROUND_NAMES.AUTUMN2,ball:main.BALL_NAMES.WORLD_CUP_FOOTBALL}];main.STANDARD_FRAMES_PER_SECONDS=[5,10,15,24,25,30,48,60,90,120];
main.STANDARD_VELOCITY_PER_SECONDS=[0,50,100,200,500,1E3,2E3];main.STANDARD_MOTION_BLURS=[new main.MotionBlurConfig(!1),new main.MotionBlurConfig(!0,0.5),new main.MotionBlurConfig(!0,1),new main.MotionBlurConfig(!0,1.5),new main.MotionBlurConfig(!0,2),new main.MotionBlurConfig(!0,2.5),new main.MotionBlurConfig(!0,3)];
main.AnimationController=function(a,b,c,d){this.el=a;this.controlContainerEl=this.el.getElementsByClassName("control-container")[0];this.addControlButtonEl=this.el.getElementsByClassName("control-add")[0];this.attributionsLinkEl=b;this.spriteContainer=c;this.animationManager=d;this.spriteControls=[];this.largeFpsWarning=this.ignoreLargeFpsWarning=this.attributionsShown=!1};
main.AnimationController.prototype.addSpriteControl=function(a){var b=a.render(this.controlContainerEl);this.controlContainerEl.insertBefore(b,this.addControlButtonEl);this.spriteControls.length&&this.addSpacerBefore(b);a.installSprite(this,this.spriteContainer,this.animationManager);this.spriteControls.push(a);this.positionSprites();this.attributionsShown&&a.showAttribution();return a};
main.AnimationController.prototype.removeSpriteControl=function(a){var b=this.spriteControls.indexOf(a),c=a.el.previousSibling,d=a.el.nextSibling;a.dispose();b==0&&d&&goog.dom.classes.has(d,"spacer")?d.parentNode.removeChild(d):c&&goog.dom.classes.has(c,"spacer")&&c.parentNode.removeChild(c);this.spriteControls.splice(b,1);this.positionSprites()};main.AnimationController.prototype.clearControls=function(){for(;this.spriteControls.length;)this.removeSpriteControl(this.spriteControls[0])};
main.AnimationController.prototype.positionSprites=function(){for(var a=[],b=0;b<this.spriteControls.length;b++)this.spriteControls[b].getAnimation()instanceof main.BallBounceAnimation&&a.push(this.spriteControls[b]);if(a.length){var c=0;for(b=0;b<a.length;b++)c+=a[b].getSprite().getSize().height;var d=c=(this.spriteContainer.getSize().height-c)/(a.length+1);for(b=0;b<a.length;b++)a[b].getSprite().setTop(d),d+=c+a[b].getSprite().getSize().height}};
main.AnimationController.prototype.addSpacerBefore=function(a){var b=document.createElement("div");b.className="spacer";for(var c=0;c<5;c++){var d=document.createElement("div");c==0?d.className="title-cell control-row":c==1?(d.className="attribution-cell control-row",d.style.display=this.attributionsShown?"":"none"):d.className="control-row";d.innerHTML="&nbsp;";b.appendChild(d)}this.controlContainerEl.insertBefore(b,a)};
main.AnimationController.prototype.render=function(){this.el.style.visibility="visible";for(var a=this.el.childNodes,b=0;b<a.length;b++)a[b].nodeType!=Node.ELEMENT_NODE&&this.el.removeChild(a[b]);this.attributionsLinkEl.addEventListener("click",goog.bind(this.handleAttributionsLinkClick_,this),!1);this.addControlButtonEl.addEventListener("click",goog.bind(this.handleAddControlButtonClick_,this),!1)};
main.AnimationController.prototype.spriteAnimationSetToLargeFps=function(){if(!this.ignoreLargeFpsWarning){if(!this.largeFpsWarning)this.largeFpsWarning=new main.LargeFpsWarning,this.largeFpsWarning.onignore.addListener(goog.bind(function(){this.ignoreLargeFpsWarning=!0},this));this.largeFpsWarning.show()}};main.AnimationController.prototype.getRandomBackgroundAndSpritePairing=function(){return main.GOOD_SPRITE_PAIRINGS[Math.round(Math.random()*main.GOOD_SPRITE_PAIRINGS.length-0.5)]};
main.AnimationController.prototype.loadDefaultPreset=function(){this.clearControls();var a=this.getRandomBackgroundAndSpritePairing();this.addSpriteControl(new main.BackgroundSpriteControl(main.BACKGROUND_IMAGE_ASSETS,a.background)).setVelocity(50).setFramesPerSecond(25).setMotionBlur(new main.MotionBlurConfig(!0));this.addSpriteControl(new main.BallSpriteControl(main.BALL_IMAGE_ASSETS,a.ball)).setVelocity(1E3).setFramesPerSecond(60).setMotionBlur(new main.MotionBlurConfig(!0));this.addSpriteControl(new main.BallSpriteControl(main.BALL_IMAGE_ASSETS,
a.ball)).setVelocity(1E3).setFramesPerSecond(25).setMotionBlur(new main.MotionBlurConfig(!0))};
main.AnimationController.prototype.load15Vs25Vs48Vs60Preset=function(a){this.clearControls();var b=this.getRandomBackgroundAndSpritePairing();this.addSpriteControl(new main.BackgroundSpriteControl(main.BACKGROUND_IMAGE_ASSETS,b.background)).setVelocity(50).setFramesPerSecond(60).setMotionBlur(new main.MotionBlurConfig(!0));for(var c=[15,25,48,60],d=[1,1,2,3],e=0;e<c.length;e++){var j=a?d[e]:1;this.addSpriteControl(new main.BallSpriteControl(main.BALL_IMAGE_ASSETS,b.ball)).setVelocity(1E3).setFramesPerSecond(c[e]).setMotionBlur(new main.MotionBlurConfig(!0,
j))}};
main.AnimationController.prototype.loadMotionBlurOnOffPreset=function(a){this.clearControls();var b=this.getRandomBackgroundAndSpritePairing();this.addSpriteControl(new main.BackgroundSpriteControl(main.BACKGROUND_IMAGE_ASSETS,b.background)).setVelocity(50).setFramesPerSecond(a).setMotionBlur(new main.MotionBlurConfig(!0));this.addSpriteControl(new main.BallSpriteControl(main.BALL_IMAGE_ASSETS,b.ball)).setVelocity(1E3).setFramesPerSecond(a).setMotionBlur(new main.MotionBlurConfig(!0));this.addSpriteControl(new main.BallSpriteControl(main.BALL_IMAGE_ASSETS,b.ball)).setVelocity(1E3).setFramesPerSecond(a).setMotionBlur(new main.MotionBlurConfig(!1))};
main.AnimationController.prototype.handleAttributionsLinkClick_=function(){if(!this.attributionsShown){this.attributionsShown=!0;this.attributionsLinkEl.style.display="none";window.scrollTo(0,0);for(var a=this.el.getElementsByClassName("attribution-cell"),b=0;b<a.length;b++)a[b].style.display="";for(b=0;b<this.spriteControls.length;b++)this.spriteControls[b].showAttribution()}};
main.AnimationController.prototype.handleAddControlButtonClick_=function(){var a=this.spriteControls[this.spriteControls.length-1],b=main.BALL_NAMES.SOCCER_BALL;a&&a instanceof main.BallSpriteControl&&(b=a.getAssetName());a?this.addSpriteControl(new main.BallSpriteControl(main.BALL_IMAGE_ASSETS,b)).setVelocity(a.getVelocity()).setFramesPerSecond(a.getFramesPerSecond()).setMotionBlur(a.getMotionBlurConfig()):this.addSpriteControl(new main.BallSpriteControl(main.BALL_IMAGE_ASSETS,b)).setVelocity(1E3).setFramesPerSecond(60).setMotionBlur(new main.MotionBlurConfig(!0))};
main.SpriteControl=function(a,b){this.spriteAssets=a;this.assetName=b;this.allowRemove=!0;this.velocityDropList=this.motionBlurDropList=this.fpsDropList=this.attributionLinkEl=this.attributionCell=this.assetDropList=this.titleNameEl=this.titleImgEl=this.el=this.controller=this.animation=this.sprite=null;this.velocity=200;this.framesPerSecond=30;this.motionBlurConfig=new main.MotionBlurConfig(!1);this.createSprite();this.createAnimation()};main.SpriteControl.prototype.getAnimation=function(){return this.animation};
main.SpriteControl.prototype.getSprite=function(){return this.sprite};main.SpriteControl.prototype.getAssetName=function(){return this.assetName};main.SpriteControl.prototype.getVelocity=function(){return this.velocity};main.SpriteControl.prototype.getFramesPerSecond=function(){return this.framesPerSecond};main.SpriteControl.prototype.getMotionBlurConfig=function(){return this.motionBlurConfig};
main.SpriteControl.prototype.setAllowRemove=function(a){goog.asserts.assert(!this.el,"Must be called before render");this.allowRemove=a};main.SpriteControl.prototype.dispose=function(){this.sprite.getContainer().removeSprite(this.sprite);this.sprite=null;this.animation.getManager().removeAnimation(this.animation);this.animation=null;this.el.parentNode&&this.el.parentNode.removeChild(this.el);this.controller=null};
main.SpriteControl.prototype.render=function(){this.el=document.createElement("div");this.el.className="sprite";if(this.allowRemove){var a=document.createElement("div");a.className="control-remove-container";this.el.appendChild(a);this.removeButtonEl=document.createElement("div");this.removeButtonEl.className="control-remove";a.appendChild(this.removeButtonEl);this.removeButtonEl.addEventListener("click",goog.bind(this.handleRemoveButtonClick_,this),!1)}var b=document.createElement("div");b.className=
"title-cell control-row";this.assetDropList=new main.DropList;this.assetDropList.render(b);for(a=0;a<this.spriteAssets.length;a++){var c=this.spriteAssets[a],d=this.assetDropList.createOption(c.name),e=document.createElement("img");e.src=c.thumbSrc;d.appendChild(e);e=document.createElement("span");e.appendChild(document.createTextNode(c.name));d.appendChild(e)}this.assetDropList.setSelected(this.assetName);this.assetDropList.onchange.addListener(goog.bind(this.handleAssetChange_,this));this.el.appendChild(b);
this.attributionCell=document.createElement("div");this.attributionCell.className="attribution-cell control-row";this.attributionCell.style.display="none";this.attributionLinkEl=document.createElement("a");this.attributionLinkEl.appendChild(document.createTextNode("Vir slike"));this.attributionLinkEl.target="_blank";this.attributionLinkEl.href=this.attributionLinkEl.title=this.getAssetByName(this.assetName).attribLink;this.attributionCell.appendChild(this.attributionLinkEl);this.el.appendChild(this.attributionCell);
b=document.createElement("div");b.className="fps-cell control-row";this.fpsDropList=new main.DropList;this.fpsDropList.render(b);for(a=0;a<main.STANDARD_FRAMES_PER_SECONDS.length;a++)c=main.STANDARD_FRAMES_PER_SECONDS[a],d=this.fpsDropList.createOption(c),d.appendChild(document.createTextNode(c+" fps"));this.fpsDropList.setSelected(this.framesPerSecond);this.fpsDropList.onchange.addListener(goog.bind(this.handleFpsChange_,this));this.el.appendChild(b);b=document.createElement("div");b.className="motion-blur-cell control-row";
this.motionBlurDropList=new main.DropList;this.motionBlurDropList.render(b);for(a=0;a<main.STANDARD_MOTION_BLURS.length;a++)c=main.STANDARD_MOTION_BLURS[a],d=this.motionBlurDropList.createOption(c.toString()),d.appendChild(document.createTextNode(c.toFriendlyString()));this.motionBlurDropList.setSelected(this.motionBlurConfig.toString());this.motionBlurDropList.onchange.addListener(goog.bind(this.handleMotionBlurChange_,this));this.el.appendChild(b);b=document.createElement("div");b.className="velocity-cell control-row";
this.velocityDropList=new main.DropList;this.velocityDropList.render(b);for(a=0;a<main.STANDARD_VELOCITY_PER_SECONDS.length;a++)c=main.STANDARD_VELOCITY_PER_SECONDS[a],d=this.velocityDropList.createOption(c),d.appendChild(document.createTextNode(c+" px/s"));this.velocityDropList.setSelected(this.velocity);this.velocityDropList.onchange.addListener(goog.bind(this.handleVelocityChange_,this));this.el.appendChild(b);return this.el};
main.SpriteControl.prototype.showAttribution=function(){this.attributionCell.style.display=""};main.SpriteControl.prototype.setVelocity=function(a){this.velocityDropList.setSelected(a);return this};main.SpriteControl.prototype.setFramesPerSecond=function(a){this.fpsDropList.setSelected(a);return this};main.SpriteControl.prototype.setMotionBlur=function(a){this.motionBlurDropList.setSelected(a.toString());return this};
main.SpriteControl.prototype.getAssetByName=function(a){for(var b=0;b<this.spriteAssets.length;b++)if(this.spriteAssets[b].name==a)return this.spriteAssets[b];return null};main.SpriteControl.prototype.handleRemoveButtonClick_=function(){this.controller.removeSpriteControl(this)};
main.SpriteControl.prototype.handleAssetChange_=function(a){this.assetName=a;a=this.sprite.getPosition();var b=this.sprite.getContainer(),c=this.sprite;this.sprite=null;var d=this.animation.getManager();d.removeAnimation(this.animation);this.animation=null;this.createSprite();b.addSpriteBefore(this.sprite,c);b.removeSprite(c);this.sprite.move(a);this.createAnimation();d.addAnimation(this.animation);this.attributionLinkEl.href=this.attributionLinkEl.title=this.getAssetByName(this.assetName).attribLink};
main.SpriteControl.prototype.handleFpsChange_=function(a){this.framesPerSecond=a;this.animation&&this.animation.setFramesPerSecond(this.framesPerSecond);a>60&&this.controller&&this.controller.spriteAnimationSetToLargeFps(this,a)};main.SpriteControl.prototype.handleVelocityChange_=function(a){this.velocity=a;this.animation&&this.animation.setVelocity(this.velocity)};
main.SpriteControl.prototype.handleMotionBlurChange_=function(a){this.motionBlurConfig=main.MotionBlurConfig.fromString(a);this.animation&&this.animation.setMotionBlur(this.motionBlurConfig)};main.SpriteControl.prototype.installSprite=function(a,b,c){this.controller=a;b.addSprite(this.sprite);c.addAnimation(this.animation)};main.SpriteControl.prototype.createSprite=function(){this.sprite=new main.ImageSprite(this.getAssetByName(this.assetName).src)};main.SpriteControl.prototype.createAnimation=function(){};
main.BallSpriteControl=function(a,b){main.SpriteControl.call(this,a,b)};goog.inherits(main.BallSpriteControl,main.SpriteControl);main.BallSpriteControl.prototype.createAnimation=function(){this.animation=new main.BallBounceAnimation(this.sprite,this.framesPerSecond,this.velocity);this.animation.setMotionBlur(this.motionBlurConfig)};main.BallSpriteControl.prototype.createSprite=function(){this.sprite=new main.ImageSprite(this.getAssetByName(this.assetName).src,100,100)};
main.BackgroundSpriteControl=function(a,b){main.SpriteControl.call(this,a,b);this.setAllowRemove(!1)};goog.inherits(main.BackgroundSpriteControl,main.SpriteControl);main.BackgroundSpriteControl.prototype.createAnimation=function(){this.animation=new main.BackgroundBounceAnimation(this.sprite,this.framesPerSecond,this.velocity);this.animation.setMotionBlur(this.motionBlurConfig)};
main.LargeFpsWarning=function(){this.onignore=new main.EventHost;this.el=document.createElement("div");this.el.style.display="none";goog.dom.classes.add(this.el,"dialog");document.body.appendChild(this.el);this.messageEl=document.createElement("div");this.el.appendChild(this.messageEl);this.buttonContainerEl=document.createElement("div");this.el.appendChild(this.buttonContainerEl);this.installJava=this.checkUsingJava=!1;this.refreshRateDetector=main.DetectRefreshRates.getInstance();this.refreshRateDetector.onstatechange.addListener(goog.bind(this.handleRefreshRateTesterState,
this))};main.LargeFpsWarning.prototype.show=function(){this.el.style.display="";this.updateDisplay()};main.LargeFpsWarning.prototype.hide=function(){this.el.style.display="none"};main.LargeFpsWarning.prototype.handleRefreshRateTesterState=function(){this.updateDisplay()};
main.LargeFpsWarning.prototype.updateDisplay=function(){var a="You have chosen an animation rate that is faster than 60 frames per second. Many computer monitors default to a refresh rate of 60 Hz. Animations faster than the native refresh rate will not appear visibly smoother.";this.buttonContainerEl.innerHTML="";if(this.installJava)a="In a moment you should be redirected to install java...";else if(this.checkUsingJava){a=main.DetectRefreshRates.State;var b=this.refreshRateDetector.getState();if(b==
a.LOADING_JAVA)a="Nalaganje jave...";else if(b==a.LOADING_JAVA_ERROR)a="Napaka med nalaganjem jave";else if(b==a.JAVA_MISSING)a="You do not appear to have java "+main.DetectRefreshRates.JAVA_VERSION_MATCHER+" installed.",b=document.createElement("button"),b.innerHTML="<span>Redirect to install java if available</span>",b.addEventListener("click",goog.bind(this.handleInstallJavaClick,this),!1),this.buttonContainerEl.appendChild(b);else if(b==a.LOADING_APPLET)a="Nalaganje appleta...";else if(b==a.LOADING_APPLET_TIMEOUT)a=
"Timed out while waiting for applet to load.";else if(b==a.COMPLETE){a=this.refreshRateDetector.getScreenRefreshRates();b=[];for(var c=0;c<a.length;c++){var d=parseInt(a[c],10);d&&b.indexOf(d)<0&&b.push(d)}a=b.length==1?"Your monitor(s) are running at a refresh rate of "+b[0]+" Hz.  The animations in this demo should work up to "+b[0]+" frames per second.":b.length>1?"Your monitors are running at the refresh rates of "+b.join(", ")+" Hz.  The animations in this demo should work up to these levels depending on which monitor your browser is in.":
"The applet loaded but your monitor's refresh rate could not be determined. If you are using an LCD monitor you are most likely running at 60 Hz. As such, the animations in this demo should work up to 60 frames per second."}else throw Error("Unexpected state: "+b);}else b=document.createElement("button"),b.innerHTML="<span>Look up my monitor's refresh rate using java</span>",b.addEventListener("click",goog.bind(this.handleCheckUsingJavaClick,this),!1),this.buttonContainerEl.appendChild(b);b=document.createElement("button");
b.innerHTML="<span>Ignore this warning</span>";b.addEventListener("click",goog.bind(this.handleIgnoreClick,this),!1);this.buttonContainerEl.appendChild(b);this.messageEl.innerHTML=a;this.el.style.marginLeft=-(this.el.offsetWidth/2)+"px";this.el.style.marginTop=-(this.el.offsetHeight/2)+"px"};main.LargeFpsWarning.prototype.handleCheckUsingJavaClick=function(){this.checkUsingJava=!0;this.refreshRateDetector.startLookup();this.updateDisplay()};
main.LargeFpsWarning.prototype.handleInstallJavaClick=function(){this.installJava=!0;this.refreshRateDetector.installJava();this.updateDisplay()};main.LargeFpsWarning.prototype.handleIgnoreClick=function(){this.onignore.fire();this.hide()};
main.BrowserVersionWarning=function(){this.el=document.createElement("div");this.el.style.display="none";this.el.className="dialog";document.body.appendChild(this.el);this.messageEl=document.createElement("div");this.el.appendChild(this.messageEl);this.buttonContainerEl=document.createElement("div");this.el.appendChild(this.buttonContainerEl)};
main.BrowserVersionWarning.prototype.check=function(){var a=!1;goog.userAgent.WEBKIT&&goog.string.compareVersions(goog.userAgent.VERSION,"533")>=0?a=!0:goog.userAgent.GECKO&&goog.string.compareVersions(goog.userAgent.VERSION,"1.9.2")>=0?a=!0:goog.userAgent.IE&&goog.string.compareVersions(goog.userAgent.VERSION,"9")>=0?a=!0:goog.userAgent.OPERA&&goog.string.compareVersions(goog.userAgent.VERSION,"11")>=0&&(a=!0);a||this.show()};
main.BrowserVersionWarning.prototype.show=function(){this.el.style.display="";this.updateDisplay()};main.BrowserVersionWarning.prototype.hide=function(){this.el.style.display="none"};
main.BrowserVersionWarning.prototype.updateDisplay=function(){this.messageEl.innerHTML="Your browser may not be supported by this tool.  Tested browsers include Chrome, Firefox 3.6+, Internet Explorer 9, Safari 5, and Opera 11.";this.buttonContainerEl.innerHTML="";var a=document.createElement("button");a.innerHTML="<span>Ignore this warning</span>";var b=this;a.onclick=function(){b.hide()};this.buttonContainerEl.appendChild(a);this.el.style.marginLeft=-(this.el.offsetWidth/2)+"px";this.el.style.marginTop=
-(this.el.offsetHeight/2)+"px"};
window.onload=function(){(new main.BrowserVersionWarning).check();var a=new main.SpriteContainer(document.getElementById("animation-container"),main.VideoSizes.DVD),b=new main.AnimationManager;a=new main.AnimationController(document.getElementById("control-bar"),document.getElementById("show-attributions-link"),a,b);a.render();a.loadDefaultPreset();window.animationController=a;a=new main.FramesIndicator(document.getElementById("frames-indicator"));if(main.PaintRateMonitor.isAvailable()){var c=main.PaintRateMonitor.create();
b.addAnimation(c)}b.addAnimation(a);b.start()};